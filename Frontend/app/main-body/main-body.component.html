<div class="container">
  <div class="row p-0 mx-2 mt-3 justify-content-center">
    <div class="col-12 col-md-10 p-4 bg-dark text-white">
      <div class="row justify-content-center">
        <div class="col-12 col-md-6">
          <div class="row mb-4 justify-content-left">
            <div class="col-12 col-md-8 mt-4">
              <h4>Product Search</h4>
            </div>
          </div>
          <div class="row">
            <div class="col-12">
              <form (ngSubmit)="onSubmit()">
                <div class="form-group row mb-3">
                  <div class="col-12 col-md-4">
                    <label
                      for="ip_keyword"
                      class="col-md-2 col-form-label"
                      style="font-size: 13px"
                      >Keyword<span style="color: red">*</span></label
                    >
                  </div>
                  <div class="col-12 col-md-8">
                    <input
                      type="text"
                      [(ngModel)]="keyword"
                      name="ip_keyword"
                      class="form-control"
                      id="ip_keyword"
                      placeholder="Enter Product Name (eg. iPhone 8)"
                      style="font-size: 14px"
                    />
                  </div>
                </div>

                <div class="form-group row mb-3">
                  <div class="col-12 col-md-4">
                    <label
                      for="ip_category"
                      class="col-md-2 col-form-label"
                      style="font-size: 14px"
                      >Category</label
                    >
                  </div>
                  <div class="col-12 col-md-8 col-lg-3 pr-0">
                    <select
                      class="form-select"
                      [(ngModel)]="category"
                      name="ip_category"
                      aria-label="Default select example"
                      style="font-size: 14px; width: 100%; padding-right:28px"
                    >
                      <option value="" selected>All Categories</option>
                      <option value="550">Art</option>
                      <option value="2984">Baby</option>
                      <option value="267">Books</option>
                      <option value="11450">
                        Clothing, Shoes & Accessories
                      </option>
                      <option value="58058">
                        Computers/Tablets & Networking&nbsp;&nbsp;&nbsp;
                      </option>
                      <option value="26395">Health & Beauty</option>
                      <option value="11233">Music</option>
                      <option value="1249">Video Games & Consoles</option>
                    </select>
                  </div>
                </div>

                <div class="form-group row mb-3">
                  <div class="col-12 col-md-4">
                    <label
                      for="ip_condition"
                      class="col-md-2 col-form-label"
                      style="font-size: 13px"
                      >Condition</label
                    >
                  </div>

                  <div class="col-12 col-md-8 mt-2">
                    <div class="form-check form-check-inline">
                      <input
                        class="form-check-input"
                        [(ngModel)]="condition_new"
                        name="ip_condition1"
                        type="checkbox"
                        id="ip_condition1"
                        value="new"
                        style="width: 15px; height: 15px; border-radius: 2px"
                      />
                      <label
                        class="form-check-label"
                        for="ip_condition1"
                        style="font-size: 13px"
                        >New</label
                      >
                    </div>
                    <div class="form-check form-check-inline">
                      <input
                        class="form-check-input"
                        [(ngModel)]="condition_used"
                        name="ip_condition2"
                        type="checkbox"
                        id="ip_condition2"
                        value="used"
                        style="width: 15px; height: 15px; border-radius: 2px"
                      />
                      <label
                        class="form-check-label"
                        for="ip_condition2"
                        style="font-size: 13px"
                        >Used</label
                      >
                    </div>
                    <div class="form-check form-check-inline">
                      <input
                        class="form-check-input"
                        [(ngModel)]="condition_unspecified"
                        name="ip_condition3"
                        type="checkbox"
                        id="ip_condition3"
                        value="unspecified"
                        style="width: 15px; height: 15px; border-radius: 2px"
                      />
                      <label
                        class="form-check-label"
                        for="ip_condition3"
                        style="font-size: 13px"
                        >Unspecified</label
                      >
                    </div>
                  </div>
                </div>

                <div class="form-group row mb-3">
                  <div class="col-12 col-md-4">
                    <label
                      for="ip_condition"
                      class="col-form-label"
                      style="font-size: 13px"
                      >Shipping Options</label
                    >
                  </div>
                  <div class="col-12 col-md-8 mt-2">
                    <div class="form-check form-check-inline">
                      <input
                        class="form-check-input"
                        [(ngModel)]="shipping_local"
                        name="ip_shipping_local"
                        type="checkbox"
                        id="ip_shipping_local"
                        value="local_pickup"
                        style="width: 15px; height: 15px; border-radius: 2px"
                      />
                      <label
                        class="form-check-label"
                        for="ip_shipping_local"
                        style="font-size: 13px"
                        >Local Pickup</label
                      >
                    </div>
                    <div class="form-check form-check-inline">
                      <input
                        class="form-check-input"
                        [(ngModel)]="shipping_free"
                        name="ip_shipping_free"
                        type="checkbox"
                        id="ip_shipping_free"
                        value="free_shipping"
                        style="width: 15px; height: 15px; border-radius: 2px"
                      />
                      <label
                        class="form-check-label"
                        for="ip_shipping_free"
                        style="font-size: 13px"
                        >Free Shipping</label
                      >
                    </div>
                  </div>
                </div>

                <div class="form-group row mb-3">
                  <div class="col-12 col-md-4">
                    <label
                      for="ip_distance"
                      class=" col-form-label"
                      style="font-size: 13px"
                      >Distance (Miles)</label
                    >
                  </div>
                  <div class="col-12 col-md-4">
                    <input
                      type="text"
                      [(ngModel)]="distance"
                      name="ip_distance"
                      class="form-control"
                      id="ip_distance"
                      value="10"
                    />
                  </div>
                </div>

                <div class="form-group row " [class.mb-3]="(from=='from_zip' && manual_zip_entry.length==0)==false">
                  <div class="col-12 col-md-4">
                    <label
                      for="ip_condition"
                      class="col-md-2 col-form-label"
                      style="font-size: 13px"
                      >From</label
                    >
                  </div>
                  <div class="col-12 col-md-8 mt-2">
                    <div class="form-check">
                      <input
                        class="form-check-input mt-2"
                        [(ngModel)]="from"
                        type="radio"
                        name="ip_from"
                        id="ip_from_cur_dis"
                        value="from_cur"
                        style="width: 13px; height: 13px"
                        checked
                      />
                      <label
                        class="form-check-label"
                        for="ip_from"
                        style="font-size: 13px"
                      >
                        Current Location
                      </label>
                    </div>
                    <div class="form-check">
                      <input
                        class="form-check-input"
                        [(ngModel)]="from"
                        type="radio"
                        name="ip_from"
                        id="ip_from_zip_code"
                        value="from_zip"
                        style="width: 13px; height: 13px"
                      />
                      <label
                        class="form-check-label"
                        for="ip_from"
                        style="font-size: 13px"
                      >
                        Other. Please specify zip code:
                      </label>
                    </div>
                  </div>
                  
                  <div class="col-0 col-md-4"></div>
                  <div class="col-12 col-md-8">
                    <input
                      #ip_zip_code
                      type="text"
                      matInput
                      [(ngModel)] = "manual_zip_entry"
                      class="form-control"
                      (input)="onInputChange(ip_zip_code.value)"
                      id="ip_zip_code"
                      name="ip_zip_code"
                      [matAutocomplete]="auto"
                      matAutocompletePosition="below"
                      [disabled]="from == 'from_cur'"
                      
                      required
                      
                    />
                    <mat-autocomplete  #auto="matAutocomplete"  >
                      <mat-option
                        *ngFor="let zip_code of zip_codes"
                        [value]="zip_code"
                      >
                        {{ zip_code }}
                      </mat-option>
                    </mat-autocomplete>
                
                  </div>
                </div>


                <div *ngIf="from=='from_zip' && manual_zip_entry.length==0" class="row mb-0">
                <div class="col-0 col-md-4"></div>
                <div class="col-12 col-md-8">
                    <p style="color:red;font-size:small;">Please enter a zip code</p>
                </div>


                </div>
                <div class="form-group row mb-3">
                  <div class="col-12 col-md-10 mt-2">
                    <button
                      type="submit"
                      class="btn btn-light"
                      style="margin-right: 35px"
                      [disabled]="validate_data()"
                    >
                    <span class="align-middle material-symbols-outlined">
                        search
                        </span>
                      Search
                    </button>
                    <button
                      type="button"
                      class="btn btn-light"
                      (click)="clearButton()"
                    >
                    <span class="align-middle material-symbols-outlined">
                        clear_all
                        </span>
                      Clear
                    </button>
                  </div>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>


<div class="container">
    <div class="row px-2">
        <div class="col">
            <div class="row">
                <div class="col">
                    <div class="d-flex justify-content-center mt-4">
                        <div class="d-inline-flex">
                            <button
                            type="button"
                            class="btn"
                            [ngClass]="tab == 'results' ? 'btn btn-dark' : 'btn btn-light'"
                            (click)="change_tab('results')"
                            >
                            Results
                            </button>
                        </div>
                        <div class="d-inline-flex">
                            <button
                            type="button"
                            class="btn"
                            [ngClass]="tab == 'wishlist' ? 'btn btn-dark' : 'btn btn-light'"
                            (click)="change_tab('wishlist'); getProductsInCart(); getTotalSum()"
                            >
                            Wishlist
                            </button>
                        </div>
                    </div>
                    <div class="row justify-content-center" *ngIf="progress_bar_status_1">
                        <div class="col-10 mt-3">
                            <ngb-progressbar type="primary" [value]="progress_bar_width" >

                            </ngb-progressbar>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row justify-content-center">
                <ng-container *ngIf="(first_api_status==true || last_product_status==true) ">
                <div class="col-12 col-lg-11 p-0">
                    <div class="d-flex flex-column align-items-end px-lg-4">
                    <button
                        type="button"
                        class="btn btn-light"
                        [disabled]="!last_product_status"
                        (click)="onDetailsButtonClick()"
                    >
                    Details<span class="align-middle material-symbols-outlined"> chevron_right </span>
                    </button>
                    </div>
                </div>
                </ng-container>
            </div>

            <div class="row justify-content-center" *ngIf="no_data_found===true && progress_bar_status_1===false">
                <div class="col-12 col-md-10 mt-2">
                    <button
                        type="button"
                        class="btn btn-block"
                        style="
                        background-color: rgb(255, 243, 205);
                        color: rgb(142, 109, 21);
                        width: 100%;
                        text-align: left;
                        "
                        disabled
                    >
                        No Records Found
                    </button>
                </div>
            </div>

            

            <div class="row justify-content-center">
                <div class="col-12 col-lg-10">
                    <ng-container *ngIf="web_app===true && (first_api_status &&  tab == 'results' && progress_bar_status_1===false)">
                    <div class="row p-0 m-0 mt-3 justify-content-center">
                        <div class="col" style="overflow-x: auto;">
                        <app-product
                            (productClicked)="productClickDetected($event);showProgressBarOnClick()"
                            [first_api_response_dict]="first_api_response"
                            [last_product_item_id]="last_product_item_id"
                            #child1
                        ></app-product>
                        </div>
                    </div>
                    </ng-container>
                </div>
            </div>

            <div class="row justify-content-center">
                <div class="col-12 col-lg-10 mt-3" style="overflow-x: auto;">
                <ng-container *ngIf="current_tab==='main_page' && tab == 'wishlist' && !product_clicked">
                    <div class="row" *ngIf="products_in_cart_main.length===0">
                        <div class="col">
                            <button
                                type="button"
                                class="btn btn-block"
                                style="
                                background-color: rgb(255, 243, 205);
                                color: rgb(142, 109, 21);
                                width: 100%;
                                text-align: left;
                                "
                                disabled
                            >
                                No Records.
                            </button>
                        </div>
                    </div>
                <table *ngIf="products_in_cart_main.length>0" class="table table-striped table-dark table-hover">
                    <colgroup>
                        <col style="width: 5%">
                        <col style="width: 15%">
                        <col style="width: 45%">
                        <col style="width: 10%">
                        <col style="width: 15%">
                        <col style="width: 10%">
                      </colgroup>
                    <thead>
                    <tr>
                        <th scope="col">#</th>
                        <th scope="col">Image</th>
                        <th scope="col">Title</th>
                        <th scope="col">Price</th>
                        <th scope="col">Shipping</th>
                        <th scope="col">Favorite</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr
                        *ngFor="let item of products_in_cart_main; index as i"
                        [attr.id]="'wishlist_' + products_in_cart_main[i]['ItemID']"
                        style="font-size: 12px"
                        [class.table-secondary]="products_in_cart_main[i]['ItemID']==last_product_item_id"
                    >
                        <td scope="col">{{ i + 1 }}</td>
                        <td scope="col">
                        <img [src]="products_in_cart_main[i]['Image']" alt="./assets/ebay_default.jpg" style="width: 90px;height:90px" />
                        </td>
                        <td scope="col" (click)="wishListProductClick(i, products_in_cart_main[i]['ItemID'])">
                            
                            <span  ngbTooltip="{{products_in_cart_main[i]['Title']}}" placement="bottom" tooltipClass="custom-tooltip">
                                <p style="max-width: 260px;
                                font-size: 13px;
                                overflow: hidden;
                                white-space: nowrap;
                                text-overflow: ellipsis;
                                color:blue;
                                cursor:default !important;">{{products_in_cart_main[i]['Title']}}</p></span></td>
                        <td scope="col">{{ products_in_cart_main[i]['Price'] }}</td>
                        <td scope="col">{{ products_in_cart_main[i]['Shipping Cost'] }}</td>
                        <td scope="col">
                        <button
                            type="button"
                            class="btn btn-light"
                            (click)="removeFromCart(products_in_cart_main[i]['ItemID'])"
                        >
                            <span class="material-symbols-outlined" style="color:goldenrod">
                            remove_shopping_cart
                            </span>
                        </button>
                        </td>
                    </tr>
                    <tr *ngIf="products_in_cart_main.length > 0">
                        <td colspan="5" style="text-align: end; font-weight:bold">Total Shopping</td>
                        <td style="font-weight:bold;">{{"$" +total_cart_sum }}</td>
                    </tr>
                    </tbody>
                </table>
                </ng-container>
                </div>
            </div>

            <div class="row justify-content-center">
                <div class="col col-md-10">
                <ng-container *ngIf="current_tab==='product_tab' && product_clicked">
                    
                <div class="row justify-content-center" *ngIf="progress_bar_status_2">
                    <div class="col-12 mt-3">
                        <ngb-progressbar type="primary" [value]="progress_bar_width" >

                        </ngb-progressbar>
                    </div>
                </div>
                <div class="row px-0" *ngIf="progress_bar_status_2===false">
                <app-product-specific
                    [product_dict]="product_specific_dict"
                    (backToMainPage)="showMainTable()"
                    [clicked_product_image]="clicked_product_image"
                    [clicked_product_shipping]="clicked_product_shipping"
                    [clicked_product_title]="clicked_product_title"
                ></app-product-specific>
                </div>
                </ng-container>
            </div>
            </div>
        </div>
    </div>
</div>
